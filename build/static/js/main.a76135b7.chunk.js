(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t(3),o=t(2),a=t(16),u=t.n(a),i=t(0),s=function(e){var n=e.newSearch,t=e.setNewSearch;return Object(i.jsxs)("div",{children:["filter shown with"," ",Object(i.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})},d=function(e){var n=e.newName,t=e.newPhone,r=e.setNewName,c=e.setNewPhone,o=e.handleSubmit;return Object(i.jsxs)("form",{onSubmit:o,children:[Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)}})]}),Object(i.jsxs)("div",{children:["phone:"," ",Object(i.jsx)("input",{value:t,onChange:function(e){return c(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.handleDeletePerson;return Object(i.jsxs)("li",{children:[n.name," - ",n.number," ",Object(i.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"delete"})]})},f=function(e){var n=e.persons,t=e.handleDeletePerson;return Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsx)(l,{person:e,handleDeletePerson:t},e.name)}))})},h=(t(23),function(e){var n=e.message,t=e.isError;return console.log(t),null===n?null:Object(i.jsx)("div",{className:"".concat(t?"error":"success"," notification"),children:n})}),j=t(5),b=t.n(j),m="/api/persons",O={getAll:function(){return b.a.get(m).then((function(e){return e.data}))},create:function(e){return b.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},p=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],a=n[1],u=Object(o.useState)(""),l=Object(c.a)(u,2),j=l[0],b=l[1],m=Object(o.useState)(""),p=Object(c.a)(m,2),v=p[0],w=p[1],x=Object(o.useState)(""),g=Object(c.a)(x,2),S=g[0],N=g[1],P=Object(o.useState)(null),k=Object(c.a)(P,2),C=k[0],D=k[1];Object(o.useEffect)((function(){O.getAll().then((function(e){return a(e)}))}),[]);var E=function(e){var n;if((e.preventDefault(),n=j,t.find((function(e){return e.name===n})))&&window.confirm("".concat(j," is already added to phonebook , replace the old number with a new one?")))return void A();J(),b(""),w("")},y=S?t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):t,A=function(){var e=t.find((function(e){return e.name===j})).id,n={name:j,number:v};O.update(e,n).then((function(n){a(t.map((function(t){return t.id!==e?t:n.person}))),I("Updated ".concat(j))})).catch((function(n){I("Information of ".concat(j," has already been removed from server"),!0),a(t.filter((function(n){return n.id!==e})))}))},I=function(e,n){D({message:e,isError:n}),setTimeout((function(){D(null)}),5e3)},J=function(){var e={name:j,number:v};O.create(e).then((function(e){a([].concat(Object(r.a)(t),[e.person])),I("Added ".concat(j))})).catch((function(e){I(e.response.data.error||e.response.data.msg,!0)}))};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),C&&Object(i.jsx)(h,{message:C.message,isError:C.isError}),Object(i.jsx)(s,{newSearch:S,setNewSearch:N}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{handleSubmit:E,setNewName:b,setNewPhone:w,newName:j,newPhone:v}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(f,{persons:y,handleSubmit:E,handleDeletePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&O.deletePerson(e).then((function(){a(t.filter((function(n){return n.id!==e}))),I("Person was removed")})).catch((function(n){I(n.response.data.error||n.response.data.msg,!0),a(t.filter((function(n){return n.id!==e})))}))}})]})};u.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a76135b7.chunk.js.map