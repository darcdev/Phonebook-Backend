{"version":3,"sources":["Filter.js","PersonForm.js","DetailPerson.js","Persons.js","Notification.js","services/persons.js","index.js"],"names":["Filter","newSearch","setNewSearch","value","onChange","evt","target","PersonForm","newName","newPhone","setNewName","setNewPhone","handleSubmit","onSubmit","type","DetailPerson","person","handleDeletePerson","name","number","onClick","id","Persons","persons","map","Notification","message","isError","console","log","className","baseUrl","personService","getAll","axios","get","then","response","data","create","post","update","put","deletePerson","delete","App","useState","setPersons","notification","setNotification","useEffect","preventDefault","existName","find","window","confirm","handleUpdatePerson","handleCreatePerson","showPersons","filter","toLowerCase","includes","updatePerson","handleNotification","catch","error","setTimeout","newPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0bccd0ef.chunk.js","sourcesContent":["const Filter = ({ newSearch, setNewSearch }) => {\n  return (\n    <div>\n      filter shown with{\" \"}\n      <input\n        value={newSearch}\n        onChange={(evt) => setNewSearch(evt.target.value)}\n      />\n    </div>\n  );\n};\n\nexport default Filter;\n","const PersonForm = ({\n  newName,\n  newPhone,\n  setNewName,\n  setNewPhone,\n  handleSubmit,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        name:{\" \"}\n        <input\n          value={newName}\n          onChange={(evt) => setNewName(evt.target.value)}\n        />\n      </div>\n      <div>\n        phone:{\" \"}\n        <input\n          value={newPhone}\n          onChange={(evt) => setNewPhone(evt.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst DetailPerson = ({ person, handleDeletePerson }) => {\n  return (\n    <li>\n      {person.name} - {person.number}{\" \"}\n      <button onClick={() => handleDeletePerson(person.id, person.name)}>\n        delete\n      </button>\n    </li>\n  );\n};\n\nexport default DetailPerson;\n","import DetailPerson from \"./DetailPerson\";\n\nconst Persons = ({ persons, handleDeletePerson }) => {\n  return (\n    <ul>\n      {persons.map((person) => (\n        <DetailPerson\n          key={person.name}\n          person={person}\n          handleDeletePerson={handleDeletePerson}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\nimport \"./index.css\";\nconst Notification = ({ message, isError }) => {\n  console.log(isError);\n  if (message === null) {\n    return null;\n  }\n  return (\n    <div className={`${isError ? \"error\" : \"success\"} notification`}>\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (data) => {\n  const request = axios.post(baseUrl, data);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, data) => {\n  const request = axios.put(`${baseUrl}/${id}`, data);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst personService = {\n  getAll,\n  create,\n  update,\n  deletePerson,\n};\n\nexport default personService;\n","import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Filter from \"./Filter\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const verifyName = (name, phone) => {\n    const person = persons.find((person) => person.name === name);\n    return person;\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    const existName = verifyName(newName, newPhone);\n\n    if (existName) {\n      const confirm = window.confirm(\n        `${newName} is already added to phonebook , replace the old number with a new one?`\n      );\n      if (confirm) {\n        handleUpdatePerson();\n        return;\n      }\n    }\n    if (newName && newPhone && !existName) {\n      handleCreatePerson();\n    }\n\n    setNewName(\"\");\n    setNewPhone(\"\");\n  };\n\n  const showPersons = newSearch\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(newSearch.toLowerCase())\n      )\n    : persons;\n\n  const handleDeletePerson = (id, name) => {\n    const confirm = window.confirm(`Delete ${name}?`);\n    if (confirm) {\n      personService.deletePerson(id).then(() => {\n        setPersons(persons.filter((person) => person.id !== id));\n      });\n    }\n  };\n\n  const handleUpdatePerson = () => {\n    const { id } = persons.find((person) => person.name === newName);\n    const updatePerson = {\n      name: newName,\n      number: newPhone,\n    };\n    personService\n      .update(id, updatePerson)\n      .then((response) => {\n        setPersons(\n          persons.map((person) => (person.id !== id ? person : response.person))\n        );\n        handleNotification(`Updated ${newName}`);\n      })\n      .catch((error) => {\n        handleNotification(\n          `Information of ${newName} has already been removed from server`,\n          true\n        );\n        setPersons(persons.filter((person) => person.id !== id));\n      });\n  };\n\n  const handleNotification = (message, isError) => {\n    setNotification({ message, isError });\n\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  const handleCreatePerson = () => {\n    const newPerson = {\n      name: newName,\n      number: newPhone,\n    };\n    personService.create(newPerson).then((response) => {\n      setPersons([...persons, response.person]);\n      handleNotification(`Added ${newName}`);\n    });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      {notification && (\n        <Notification\n          message={notification.message}\n          isError={notification.isError}\n        />\n      )}\n\n      <Filter newSearch={newSearch} setNewSearch={setNewSearch} />\n\n      <h2>add a new</h2>\n\n      <PersonForm\n        handleSubmit={handleSubmit}\n        setNewName={setNewName}\n        setNewPhone={setNewPhone}\n        newName={newName}\n        newPhone={newPhone}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons\n        persons={showPersons}\n        handleSubmit={handleSubmit}\n        handleDeletePerson={handleDeletePerson}\n      />\n    </div>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}